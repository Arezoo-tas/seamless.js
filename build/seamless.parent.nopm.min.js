/*! seamless.js 2014-04-16 */
!function(a,b,c){c.SeamlessBase={getParam:function(b,c){c=c||a.location.search;var d="[?&]"+b+"=([^&#]*)",e=new RegExp(d),f=e.exec(c);return null===f?"":decodeURIComponent(f[1].replace(/\+/g," "))},isEmptyObject:function(a){var b;for(b in a)return!1;return!0}}}(window,document,jQuery),function(a,b,c){c.SeamlessConnection=function(a,b){this.id=0,this.target=a,this.url=b,this.active=!1,this.queue=[]},c.SeamlessConnection.prototype.send=function(a){this.active&&this.target?(a.hasOwnProperty("data")||(a={data:a}),a.target=this.target,a.url=this.url,a.type=a.type||"seamless_data",a.data=a.data||{},a.data.__id=this.id,c.pm(a)):this.queue.push(a)},c.SeamlessConnection.prototype.receive=function(a,b){"function"==typeof a&&(b=a,a="seamless_data");var d=this;c.pm.bind(a,function(a,c){return a.__id&&a.__id===d.id?b(a,c):!1})},c.SeamlessConnection.prototype.setActive=function(a){if(this.active=a,this.queue.length>0){for(var b in this.queue)this.send(this.queue[b]);this.queue=[],this.queue.length=0}}}(window,document,jQuery),function(a,b,c){if(!c.hasOwnProperty("pm"))return void console.log("You must install the jQuery.pm module to use seamless.js.");c.pm.bind("seamless_noiframe",function(b){b.href=b.href.replace(/noiframe\=[^&?#]+/,""),a.location.replace(b.href)}),a.seamlessOpenFallback=function(b,c){c.preventDefault?(c.preventDefault(),c.stopPropagation()):c.returnValue=!1,a.open(b,"",["width=960","height=800","menubar=no","titlebar=no","toolbar=no","status=no","scrollbars=yes","chrome=yes"].join(","))};var d=[],e=!1,f="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),g=function(){for(var a=[],b=0;32>b;b++)a[b]=f[0|32*Math.random()];return a.join("")};c.pm.bind("seamless_ready",function(){if(!e){e=!0;var a=function(a){return function(b){a.seamless_options.onConnect&&a.seamless_options.onConnect(b)}};for(var b in d){var f=d[b];f.connection.id||(f.connection.id=g());var h={id:f.connection.id,styles:f.seamless_options.styles};f.connection.target||(f.connection.target=f[0].contentWindow),c.pm({type:"seamless_connect",target:f.connection.target,url:f.connection.url,data:h,success:a(f)}),f.trigger("connected")}e=!1}}),c.pm.bind("seamless_update",function(a,b){for(var c in d){var e=d[c];if(e.connection.id===a.__id)return e.seamless_update(a,b)}return a.height=0,a}),c.fn.seamless=function(e){var f={loading:"Loading ...",spinner:"http://www.travistidwell.com/seamless.js/src/loader.gif",onConnect:null,styles:[],fallback:!0,fallbackParams:"",fallbackText:"",fallbackLinkText:"Click here",fallbackLinkAfter:" to open in a separate window.",fallbackStyles:["padding: 15px","border: 1px solid transparent","border-radius: 4px","color: #3a87ad","background-color: #d9edf7","border-color: #bce8f1"]};e=e||{};for(var g in f)e.hasOwnProperty(g)||(e[g]=f[g]);var h=c(this).eq(0);h.seamless_options=e,d.push(h);var i=(h.attr("name")||h.attr("id"),h.attr("src"));h.connection=new c.SeamlessConnection(h[0].contentWindow,i),h.send=function(a){h.connection.send.call(h.connection,a)},h.receive=function(a,b){h.connection.receive.call(h.connection,a,b)},h.attr({scrolling:"no",seamless:"seamless",width:"100%",height:"0px",marginheight:"0",marginwidth:"0",frameborder:"0",horizontalscrolling:"no",verticalscrolling:"no"}).css({border:"none",overflowY:"hidden"});var j=c(b.createElement("div")).css({background:"url("+e.spinner+") no-repeat 10px 13px",padding:"10px 10px 10px 60px",width:"100%"}),k=!0;if(j.append(e.loading),h.before(j),e.fallback){e.fallbackParams&&(i+=-1===i.search(/\?/)?"?":"&",i+=e.fallbackParams);var l=c(b.createElement("a")).attr({"class":"seamless-fallback-link",href:"#",onclick:'seamlessOpenFallback("'+i+'", event)'});l.append(e.fallbackLinkText);var m=c(b.createElement("div")).attr({"class":"seamless-fallback"});m.append(c(b.createElement("em")).attr({style:"padding: 5px;"})),h.after(m);var n=function(a,b){m.attr("style",b?e.fallbackStyles.join(";"):""),m.find("em").text(a+" ").append(l).append(e.fallbackLinkAfter)};e.fallbackText&&n(e.fallbackText,!1),c(a).error(function(){var a="An error has been detected on this page, ";a+="which may cause problems with the operation of this application.",n(a,!0)}),setTimeout(function(){k&&(j.remove(),k=!1,n("An error has been detected on this page.",!0))},3e4)}return h.seamless_update=function(a){return k&&(j.remove(),k=!1,h.connection.setActive(!0)),a.height>0&&h.height(a.height).attr("height",a.height+"px"),a},h}}(window,document,jQuery);