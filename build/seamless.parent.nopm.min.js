!function(e,t){"use strict";e.SeamlessBase={isNumeric:function(e){return e-parseFloat(e)+1>=0},getElement:function(e){var s="querySelectorAll";0===e.indexOf("#")&&(s="getElementById",e=e.substr(1,e.length));var n=t[s](e);return n&&"querySelectorAll"===s?n[0]:n},elementHeight:function(e){var s=0,n=0;return t.all?(s=e.currentStyle.height,this.isNumeric(s)||(s=e.offsetHeight),s=parseInt(s,10),n=parseInt(e.currentStyle.marginTop,10)+parseInt(e.currentStyle.marginBottom,10)):(s=parseInt(t.defaultView.getComputedStyle(e,"").getPropertyValue("height"),10),n=parseInt(t.defaultView.getComputedStyle(e,"").getPropertyValue("margin-top"),10)+parseInt(t.defaultView.getComputedStyle(e,"").getPropertyValue("margin-bottom"),10)),s+n},hasClass:function(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},addClass:function(e,t){e.classList?e.classList.add(t):this.hasClass(e,t)||(e.className+=" "+t)},removeClass:function(e,t){if(e.classList)e.classList.remove(t);else if(this.hasClass(e,t)){var s=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(s," ")}},getParam:function(t,s){s=s||e.location.search;var n="[?&]"+t+"=([^&#]*)",a=new RegExp(n),l=a.exec(s);return null===l?"":decodeURIComponent(l[1].replace(/\+/g," "))},filterText:function(e){return e.replace(/[<>]/g,"")},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},setStyle:function(t,s){s.length>0&&(s="string"==typeof s?s:s.join(" "),s=e.SeamlessBase.filterText(s),t.styleSheet?t.styleSheet.cssText=s:t.innerHTML=s)},injectStyles:function(s){var n=this.getElement("style#injected-styles");if(n)e.SeamlessBase.setStyle(n,s);else{var a=t.createElement("style");a.setAttribute("type","text/css"),a.setAttribute("id","injected-styles"),e.SeamlessBase.setStyle(a,s);var l=t.head||t.getElementsByTagName("head")[0];l&&l.appendChild(a)}},injectAppendedStyles:function(e){var s=e.join(";"),n=t.head||t.getElementsByTagName("head")[0],a=t.createElement("style");a.type="text/css",a.styleSheet?a.styleSheet.cssText=s:a.appendChild(t.createTextNode(s)),n.appendChild(a)}}}(window,document),function(e){"use strict";e.SeamlessConnection=function(e,t){this.id=0,this.target=e,this.url=t,this.active=!1,this.queue=[]},e.SeamlessConnection.prototype.send=function(t){this.active&&this.target?(t=t||{},t.hasOwnProperty("data")||(t={data:t}),t.target=this.target,t.url=this.url||"index.html",t.type=t.type||"seamless_data",t.data=t.data||{},t.data.__id=this.id,e.pm(t)):this.queue.push(t)},e.SeamlessConnection.prototype.receive=function(t,s){"function"==typeof t&&(s=t,t="seamless_data");var n=this;e.pm.bind(t,function(e,t){return!(!e.__id||e.__id!==n.id)&&s(e,t)})},e.SeamlessConnection.prototype.setActive=function(e){if(this.active=e,this.queue.length>0){for(var t in this.queue)this.send(this.queue[t]);this.queue=[],this.queue.length=0}}}(window),function(e,t,s,n){"use strict";if(!e.hasOwnProperty("pm"))return void console.log("You must install the postmessage.js module to use seamless.js.");e.pm.bind("seamless_noiframe",function(t){t.href=t.href.replace(/noiframe\=[^&?#]+/,""),e.location.replace(t.href)}),e.seamlessOpenFallback=function(t,s,n,a){a.preventDefault?(a.preventDefault(),a.stopPropagation()):a.returnValue=!1,e.open(t,"",["width="+s,"height="+n,"menubar=no","titlebar=no","toolbar=no","status=no","scrollbars=yes","chrome=yes"].join(","))};var a=[],l=!1,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=function(){for(var e=[],t=0;t<32;t++)e[t]=i[0|32*Math.random()];return e.join("")};e.pm.bind("seamless_ready",function(e,t){if(!l){l=!0;for(var s in a)a.hasOwnProperty(s)&&a[s].seamless_ready(e,t);l=!1}}),e.pm.bind("seamless_update",function(e,t){for(var s in a)if(a.hasOwnProperty(s)){var n=a[s];if(n.connection.id===e.__id)return n.seamless_update(e,t)}return e.height=0,e}),e.pm.bind("seamless_error",function(e,t){for(var s in a)a.hasOwnProperty(s)&&a[s].seamless_error(e,t)});var o=function(s){var l={showLoadingIndicator:!0,loading:"Loading ...",spinner:"http://www.travistidwell.com/seamless.js/src/loader.gif",onConnect:null,styles:[],fallback:!0,fallbackParams:"",fallbackText:"",fallbackLinkText:"Click here",fallbackLinkAfter:" to open in a separate window.",fallbackStyles:["padding: 15px","border: 1px solid transparent","border-radius: 4px","color: #3a87ad","background-color: #d9edf7","border-color: #bce8f1"],fallbackLinkStyles:["display: inline-block","color: #333","border: 1px solid #ccc","background-color: #fff","padding: 5px 10px","text-decoration: none","font-size: 12px","line-height: 1.5","border-radius: 6px","font-weight: 400","cursor: pointer","-webkit-user-select: none","-moz-user-select: none","-ms-user-select: none","user-select: none"],fallbackLinkHoverStyles:["background-color:#ebebeb","border-color:#adadad"],fallbackWindowWidth:960,fallbackWindowHeight:800};s=s||{};for(var i in l)s.hasOwnProperty(i)||(s[i]=l[i]);var o=this.length?this[0]:this;o.seamless_options=s,a.push(o);var c=(o.getAttribute("name")||o.getAttribute("id"),o.getAttribute("src"));o.connection=new e.SeamlessConnection(o.contentWindow,c),o.send=function(e){o.connection.send.call(o.connection,e)},o.receive=function(e,t){o.connection.receive.call(o.connection,e,t)};var d={scrolling:"no",seamless:"seamless",width:"100%",height:"0px",marginheight:"0",marginwidth:"0",frameborder:"0",horizontalscrolling:"no",verticalscrolling:"no",style:"border: none; overflow-y: hidden;"};for(var i in d)o.setAttribute(i,d[i]);if(s.showLoadingIndicator){var u=t.createElement("div"),f="background: url("+s.spinner+") no-repeat 10px 13px;";f+="padding: 10px 10px 10px 60px;",f+="width: 100%;",u.setAttribute("style",f);var m=t.createTextNode(s.loading);u.appendChild(m),o.parentNode.insertBefore(u,o)}var p=!0,h=function(){p=!1,u!==n&&u.parentNode.removeChild(u)};if(s.fallback){s.fallbackParams&&(c+=c.search(/\?/)===-1?"?":"&",c+=s.fallbackParams);var g=e.SeamlessBase.getElement("#seamless-fallback-styles");if(!g){var b=function(t){return e.SeamlessBase.filterText(t.join(";"))};g=t.createElement("style"),g.setAttribute("id","seamless-fallback-styles"),g.setAttribute("type","text/css"),e.SeamlessBase.setStyle(g,".seamless-fallback.seamless-styles {"+b(s.fallbackStyles)+"}.seamless-fallback em { padding: 5px; }.seamless-fallback-link.seamless-styles {"+b(s.fallbackLinkStyles)+"}.seamless-fallback-link.seamless-styles:hover {"+b(s.fallbackLinkHoverStyles)+"}"),o.parentNode.insertBefore(g,o)}var y=['"'+c+'"',s.fallbackWindowWidth,s.fallbackWindowHeight],v=t.createElement("a");v.setAttribute("class","seamless-fallback-link"),v.setAttribute("href","#"),v.setAttribute("onclick","seamlessOpenFallback("+y.join(",")+", event)");var k=t.createElement("div");k.setAttribute("class","seamless-fallback"),k.appendChild(t.createElement("em")),o.parentNode.insertBefore(k,o.nextSibling);var x=function(s,n,a,l){l?(e.SeamlessBase.addClass(k,"seamless-styles"),e.SeamlessBase.addClass(v,"seamless-styles")):(e.SeamlessBase.removeClass(k,"seamless-styles"),e.SeamlessBase.removeClass(v,"seamless-styles"));var i=k.getElementsByTagName("em")[0];i&&(i.innerHTML=e.SeamlessBase.filterText(s)+" ",v.innerHTML=e.SeamlessBase.filterText(n),i.appendChild(v),a&&i.appendChild(t.createTextNode(a)))};s.fallbackText&&x(s.fallbackText,s.fallbackLinkText,s.fallbackLinkAfter,!1),e.onerror=function(){var e="An error has been detected on this page, ";e+="which may cause problems with the operation of this application.",x(e,s.fallbackLinkText,s.fallbackLinkAfter,!0)},setTimeout(function(){p&&(h(),x("An error has been detected on this page.",s.fallbackLinkText,s.fallbackLinkAfter,!0))},3e4)}return o.seamless_ready=function(t,s){o.connection.id||(o.connection.id=r());var n={id:o.connection.id,styles:o.seamless_options.styles};o.connection.target||(o.connection.target=o[0].contentWindow),e.pm({type:"seamless_connect",target:o.connection.target,url:o.connection.url,data:n,success:function(e){o.seamless_options.onConnect&&o.seamless_options.onConnect(e)}}),o.dispatchEvent(new CustomEvent("connected"))},o.seamless_update=function(e,t){return p&&(h(),o.connection.setActive(!0)),e.height>=0&&(o.style.height=e.height+"px",o.setAttribute("height",e.height+"px")),e},o.seamless_error=function(e,t){h(),o.hide(),x(e.msg,e.linkText,e.afterText,!0)},o};s&&s.fn&&(s.fn.seamless=o),e.seamless=function(e,t){return o.call(e,t)}}(window,document,"undefined"==typeof jQuery?{}:jQuery);