/*! seamless.js 2014-04-25 */
!function(a,b,c){c.SeamlessBase={getParam:function(b,c){c=c||a.location.search;var d="[?&]"+b+"=([^&#]*)",e=new RegExp(d),f=e.exec(c);return null===f?"":decodeURIComponent(f[1].replace(/\+/g," "))},filterText:function(a){return a.replace(/[<>]/g,"")},isEmptyObject:function(a){var b;for(b in a)return!1;return!0}}}(window,document,jQuery),function(a,b,c){c.SeamlessConnection=function(a,b){this.id=0,this.target=a,this.url=b,this.active=!1,this.queue=[]},c.SeamlessConnection.prototype.send=function(a){this.active&&this.target?(a.hasOwnProperty("data")||(a={data:a}),a.target=this.target,a.url=this.url,a.type=a.type||"seamless_data",a.data=a.data||{},a.data.__id=this.id,c.pm(a)):this.queue.push(a)},c.SeamlessConnection.prototype.receive=function(a,b){"function"==typeof a&&(b=a,a="seamless_data");var d=this;c.pm.bind(a,function(a,c){return a.__id&&a.__id===d.id?b(a,c):!1})},c.SeamlessConnection.prototype.setActive=function(a){if(this.active=a,this.queue.length>0){for(var b in this.queue)this.send(this.queue[b]);this.queue=[],this.queue.length=0}}}(window,document,jQuery),function(a,b,c){return c.hasOwnProperty("pm")?void(c.seamless={options:{url:"",container:"body",update:200,allowStyleInjection:!1,requireCookies:!1,cookieFallbackMsg:"Your browser requires this page to be opened in a separate window.",cookieFallbackLinkMsg:"Click Here",cookieFallbackAfterMsg:" to open in a separate window.",onUpdate:null,onConnect:null},connect:function(d){d=d||{};for(var e in d)this.options.hasOwnProperty(e)&&(this.options[e]=d[e]);d=this.options;var f=new c.SeamlessConnection(a.parent,d.url),g=!1,h=function(a,b,c){g=!0,f.send({type:"seamless_error",data:{msg:a,linkText:b,afterText:c}})};if(f.setActive(!0),d.requireCookies){b.cookie="cookieTest=true";var i=b.cookie;i.match(/cookieTest\=true/g)||h(d.cookieFallbackMsg,d.cookieFallbackLinkMsg,d.cookieFallbackAfterMsg)}var j=c.SeamlessBase.getParam("noiframe").toString();if("1"===j||"true"===j.toLowerCase())f.send({type:"seamless_noiframe",data:{href:a.location.href}});else{var k=!1,l=d.container,m=0,n=0,o=function(){if(!g){n&&clearTimeout(n);var a=c(l).outerHeight(!0);if(a=a>100?a:100,!k&&m!==a){k=!0;var b={height:a};d.onUpdate&&d.onUpdate(b),f.send({type:"seamless_update",data:b,success:function(a){m=a.height,k=!1}})}n=setTimeout(o,d.update)}};c("html").attr({style:"overflow:hidden;"+c("body").attr("html"),scroll:"no"});var p=function(a){g||(a=a||0,f.id||(f.send({type:"seamless_ready",data:{}}),50>a&&setTimeout(function(){p(++a)},200)))},q=function(a){if(d.allowStyleInjection&&a.length>0){a="string"==typeof a?a:a.join(""),a=c.SeamlessBase.filterText(a);var e=function(a,b){a.styleSheet?a.styleSheet.cssText=b:c(a).html(b)},f=c("style#injected-styles");if(f.length>0)e(f[0],a);else{var g=c(b.createElement("style")).attr({type:"text/css",id:"injected-styles"});e(g[0],a),c("head").append(g)}}};c.pm.bind("seamless_styles",function(a){q(a),o()}),c.pm.bind("seamless_connect",function(a){return f.id=a.id,d.onConnect&&d.onConnect(a),q(a.styles),o(),a}),p()}return f}}):void console.log("You must install the jQuery.pm module to use seamless.js.")}(window,document,jQuery);